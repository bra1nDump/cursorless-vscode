<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>default | cursorless</title><meta name="description" content="Documentation for cursorless"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script async src="../assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">cursorless</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../index.html">cursorless</a></li><li><a href="../modules/core_commandRunner_CommandRunner.html">core/commandRunner/CommandRunner</a></li><li><a href="core_commandRunner_CommandRunner.default.html">default</a></li></ul><h1>Class default</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel tsd-hierarchy"><h3>Hierarchy</h3><ul class="tsd-hierarchy"><li><span class="target">default</span></li></ul></section><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section "><h3>Constructors</h3><ul class="tsd-index-list"><li class="tsd-kind-constructor tsd-parent-kind-class"><a href="core_commandRunner_CommandRunner.default.html#constructor" class="tsd-kind-icon">constructor</a></li></ul></section><section class="tsd-index-section "><h3>Methods</h3><ul class="tsd-index-list"><li class="tsd-kind-method tsd-parent-kind-class"><a href="core_commandRunner_CommandRunner.default.html#dispose" class="tsd-kind-icon">dispose</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="core_commandRunner_CommandRunner.default.html#runCommand" class="tsd-kind-icon">run<wbr/>Command</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Constructors</h2><section class="tsd-panel tsd-member tsd-kind-constructor tsd-parent-kind-class"><a id="constructor" class="tsd-anchor"></a><h3>constructor</h3><ul class="tsd-signatures tsd-kind-constructor tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">new default<span class="tsd-signature-symbol">(</span>graph<span class="tsd-signature-symbol">: </span><a href="../interfaces/typings_Types.Graph.html" class="tsd-signature-type" data-tsd-kind="Interface">Graph</a>, thatMark<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">ThatMark</span>, sourceMark<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">ThatMark</span>, testCaseRecorder<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">TestCaseRecorder</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="core_commandRunner_CommandRunner.default.html" class="tsd-signature-type" data-tsd-kind="Class">default</a></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/bra1nDump/cursorless-vscode/blob/deb1a68/src/core/commandRunner/CommandRunner.ts#L23">core/commandRunner/CommandRunner.ts:23</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Subscribe to vscode <code>cursorless.command</code>.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>graph: <a href="../interfaces/typings_Types.Graph.html" class="tsd-signature-type" data-tsd-kind="Interface">Graph</a></h5></li><li><h5>thatMark: <span class="tsd-signature-type">ThatMark</span></h5></li><li><h5>sourceMark: <span class="tsd-signature-type">ThatMark</span></h5></li><li><h5>testCaseRecorder: <span class="tsd-signature-type">TestCaseRecorder</span></h5></li></ul><h4 class="tsd-returns-title">Returns <a href="core_commandRunner_CommandRunner.default.html" class="tsd-signature-type" data-tsd-kind="Class">default</a></h4></li></ul></section></section><section class="tsd-panel-group tsd-member-group "><h2>Methods</h2><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="dispose" class="tsd-anchor"></a><h3>dispose</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">dispose<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/bra1nDump/cursorless-vscode/blob/deb1a68/src/core/commandRunner/CommandRunner.ts#L186">core/commandRunner/CommandRunner.ts:186</a></li></ul></aside><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="runCommand" class="tsd-anchor"></a><h3>run<wbr/>Command</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">run<wbr/>Command<span class="tsd-signature-symbol">(</span>commandArgument<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">CommandArgument</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/bra1nDump/cursorless-vscode/blob/deb1a68/src/core/commandRunner/CommandRunner.ts#L72">core/commandRunner/CommandRunner.ts:72</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Entry point for each command.</p>
</div><div><p>Steps to run a command:</p>
<ul>
<li>Make action name and targets canonical.
Vocabulary in cursorless-talon differs from cursorless-vscode.
For example swap gets mapped to swapTargets.</li>
<li>Infer targets based on previous targets and action preferences {@see inferFullTargets}.</li>
<li>Capture special targets (current selection, that, source) in {@see ProcessedTargetsContext}.</li>
<li>Get text ranges (called selections) from targets.
Roughly: <code>{ modifier: arg | line, mark: blue air | this | that } -&gt; { file, textRange }</code></li>
<li>Run action given the text ranges. For a list of of all actions {@see Actions}
  This is why one actions perform edits they need to use {@see Graph.rangeUpdater}.
  It makes sure then when actions are performed marks are updated accordingly.</li>
<li>Update ranges for marks (currently selection, source and that are supported).
Actions often cause document edits resulting in marks shifting in the document.
Keeping track of these marks is arguably the most complicated part of the codebase {@see RangeUpdater}.</li>
</ul>
<p>Control flow up to this point:</p>
<ul>
<li>cursorless-vscode grammar captures one or more commands
<code>take arg air bring this to bat</code> For example contains two commands.
Each command gets encoded into an instance of {@see CommandArgumentV0V1}.
Finally <code>talon.actions.user.vscode_with_plugin(&quot;cursorless.command&quot;, ...commands)</code>
transfers control to knausj_talon/apps/vscode/command_client.</li>
<li>command_client.py rights commands to request.json file in a prearranged directory,
and issues a prearranged key press that gets captured by current vscode window.
This key press is picked up by command-runner extension.</li>
<li>command-runner figures out it got a cursorless command(s) and runs <code>cursorless.command</code>,
which we have registered to in the constructor.</li>
</ul>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>commandArgument: <span class="tsd-signature-type">CommandArgument</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../index.html">Modules</a></li><li class="current tsd-kind-module"><a href="../modules/core_commandRunner_CommandRunner.html">core/command<wbr/>Runner/<wbr/>Command<wbr/>Runner</a></li><li class=" tsd-kind-module"><a href="../modules/core_inferFullTargets.html">core/infer<wbr/>Full<wbr/>Targets</a></li><li class=" tsd-kind-module"><a href="../modules/core_updateSelections_RangeUpdater.html">core/update<wbr/>Selections/<wbr/>Range<wbr/>Updater</a></li><li class=" tsd-kind-module"><a href="../modules/core_updateSelections_updateRangeInfos.html">core/update<wbr/>Selections/update<wbr/>Range<wbr/>Infos</a></li><li class=" tsd-kind-module"><a href="../modules/core_updateSelections_updateSelections.html">core/update<wbr/>Selections/update<wbr/>Selections</a></li><li class=" tsd-kind-module"><a href="../modules/extension.html">extension</a></li><li class=" tsd-kind-module"><a href="../modules/processTargets.html">process<wbr/>Targets</a></li><li class=" tsd-kind-module"><a href="../modules/processTargets_modifiers_processModifier.html">process<wbr/>Targets/modifiers/process<wbr/>Modifier</a></li><li class=" tsd-kind-module"><a href="../modules/processTargets_processMark.html">process<wbr/>Targets/process<wbr/>Mark</a></li><li class=" tsd-kind-module"><a href="../modules/typings_Types.html">typings/<wbr/>Types</a></li><li class=" tsd-kind-module"><a href="../modules/typings_treeSitter.html">typings/tree<wbr/>Sitter</a></li><li class=" tsd-kind-module"><a href="../modules/util_canonicalizeAndValidateCommand.html">util/canonicalize<wbr/>And<wbr/>Validate<wbr/>Command</a></li><li class=" tsd-kind-module"><a href="../modules/util_getPrimitiveTargets.html">util/get<wbr/>Primitive<wbr/>Targets</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="current tsd-kind-class tsd-parent-kind-module"><a href="core_commandRunner_CommandRunner.default.html" class="tsd-kind-icon">default</a><ul><li class="tsd-kind-constructor tsd-parent-kind-class"><a href="core_commandRunner_CommandRunner.default.html#constructor" class="tsd-kind-icon">constructor</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="core_commandRunner_CommandRunner.default.html#dispose" class="tsd-kind-icon">dispose</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="core_commandRunner_CommandRunner.default.html#runCommand" class="tsd-kind-icon">run<wbr/>Command</a></li></ul></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-namespace"><span class="tsd-kind-icon">Namespace</span></li><li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li><li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="../assets/main.js"></script></body></html>